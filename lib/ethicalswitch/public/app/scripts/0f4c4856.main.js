$(document).ready(function(){function a(a){console.log("statusChangeCallback"),console.log(a),"connected"===a.status?b():"not_authorized"===a.status}function b(){console.log("Welcome!  Fetching your information.... "),FB.api("/me",function(a){c(a),console.log("Successful login for: "+a.name),$("#status").html("Thanks for signing up, "+a.first_name+"!"),$("#login").html('Welcome to the Tribe! <span class="glyphicon glyphicon-ok">').addClass("btn-success")})}function c(a){console.log("Adding user to database.... "),$.ajax({type:"POST",url:"http://api.ethicalswitch.org/users/",data:a,dataType:"json",contentType:"application/x-www-form-urlencoded"})}$.ajaxSetup({cache:!0}),$.getScript("//connect.facebook.net/en_UK/all.js",function(){FB.init({appId:"1427999834129994"}),$("#loginbutton,#feedbutton").removeAttr("disabled"),FB.getLoginStatus(a)}),$("#login").click(function(){FB.login(function(a){Log.info("FB.login callback",a),"connected"===a.status?(Log.info("User is logged in"),c(a)):Log.info("User is logged out")})})});